<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="thirdinteractiverecord">
	<select id="thirdinteractiverecordPage" parameterType="Dto" resultType="Dto">
		SELECT
			ftco.id_,
			ftco.third_channel_id_,
			fth.name_,
			ftco.order_id_,
			ftco.interface_code_,
			ftco.interface_url_,
			ftco.sent_time_,
			ftcor.response_time_,
			ftco.sent_content_,
			ftcor.response_content_
		FROM
			fc_third_channel_order ftco,
			fc_third_channel_order_response ftcor,
			fc_third_channel fth
		WHERE
			ftco.id_ = ftcor.id_
		AND fth.id_ = ftco.third_channel_id_
		
		<if test="third_channel_id_ != null and third_channel_id_ != ''">
			AND ftco.third_channel_id_ = #{third_channel_id_}
		</if>
		
		<if test="start_sent_time_ != null and start_sent_time_ !='' "> 
			AND ftco.sent_time_ <![CDATA[ >= ]]> #{start_sent_time_}  <!-- 开始日期 -->
		</if>
		
		<if test="end_sent_time_!= null and end_sent_time_!='' ">
			AND ftco.sent_time_ <![CDATA[ <= ]]> CONCAT(#{end_sent_time_},' 23:59:59')  <!-- 结束日期 -->
		</if>
		

		<if test="order_id_ != null and order_id_ != ''">
			AND ftco.order_id_ like '%${order_id_}%'
		</if>

		<if test="start_response_time_ != null and start_response_time_ !='' "> 
			AND ftcor.response_time_ <![CDATA[ >= ]]> #{start_response_time_}  <!-- 开始日期 -->
		</if>
		
		<if test="end_response_time_!= null and end_response_time_!='' ">
			AND ftcor.response_time_ <![CDATA[ <= ]]> CONCAT(#{end_response_time_},' 23:59:59')  <!-- 结束日期 -->
		</if>
		
		<if test="interface_code_ != null and interface_code_ != ''">
			AND ftco.interface_code_ = #{interface_code_}
		</if>

	</select>
	
	
	<select id="thirdinteractiverecordDetail" parameterType="Dto" resultType="Dto">
		SELECT
			ftco.sent_content_,
			ftcor.response_content_
		FROM
			fc_third_channel_order ftco,
			fc_third_channel_order_response ftcor
		WHERE
			ftco.id_ = ftcor.id_
		AND
		
		<if test="id_ != null and id_ != ''">
			ftco.id_ = #{id_ }
		</if>
		
	</select>
	
	
</mapper>