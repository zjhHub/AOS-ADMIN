<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="privilege">
	<select id="listPage" parameterType="Dto" resultType="Dto">
		select permission.platform_id_,platform.name_,group_concat(platform_two.name_) all_platform_name_ 
		from fc_platform platform left join as_account_permission permission  on permission.platform_id_=platform.id_
		left join fc_platform platform_two on permission.ext_auth_=platform_two.id_
		group by permission.platform_id_
	</select>
	
	<select id="listPlatformPage" parameterType="Dto" resultType="Dto">
		select id_,name_ from fc_platform
	</select>
	
	<delete id="deleteAccountPermissionByPlatformId" parameterType="Dto">
		delete from as_account_permission where platform_id_=#{platform_id_}
	</delete>
	
	<select id="findAccountPermissionById" parameterType="Dto" resultType="Dto">
		select GROUP_CONCAT(ext_auth_) ext_auth_ from as_account_permission where platform_id_ = #{platform_id_}
	
	</select>
	
</mapper> 