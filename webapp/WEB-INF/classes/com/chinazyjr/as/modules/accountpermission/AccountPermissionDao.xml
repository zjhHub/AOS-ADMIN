<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="AccountPermissionDao">



	<!-- 查询务线下的账户 -->
	<select id="getAccountPermissionCount" parameterType="Dto" resultType="Integer">
		SELECT count(id_) FROM as_accounts
		<where>
			account_code_ in
			<foreach collection="listAccount" item="item" open="(" close=")"
				separator=",">
				#{item.account_code_}
			</foreach>

			AND attach_platform_ in (select ext_auth_ from as_account_permission WHERE platform_id_=#{attach_platform_} )

		</where>
	</select>

	
</mapper>